!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("clappr")):"function"==typeof define&&define.amd?define(["clappr"],e):"object"==typeof exports?exports.AudioSelector=e(require("clappr")):t.AudioSelector=e(t.Clappr)}(this,function(t){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var o={};return e.m=t,e.c=o,e.p="<%=baseUrl%>/",e(0)}([/*!******************!*\
  !*** ./index.js ***!
  \******************/
function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o(/*! ./src/main.js */1),t.exports=e.default},/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=function(t,e,o){for(var n=!0;n;){var r=t,i=e,a=o;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(r);if(null===u)return;t=u,e=i,o=a,n=!0,s=u=void 0}},l=o(/*! clappr */2),u=o(/*! ./public/level-selector.html */3),c=n(u),d=o(/*! ./public/style.scss */4),f=n(d),h=function(t){function e(){r(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),a(e,[{key:"bindEvents",value:function(){this.listenTo(this.core,l.Events.CORE_READY,this.bindPlaybackEvents),this.listenTo(this.core.mediaControl,l.Events.MEDIACONTROL_CONTAINERCHANGED,this.reload),this.listenTo(this.core.mediaControl,l.Events.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,l.Events.MEDIACONTROL_HIDE,this.hideContextMenu)}},{key:"unBindEvents",value:function(){this.stopListening(this.core,l.Events.CORE_READY),this.stopListening(this.core.mediaControl,l.Events.MEDIACONTROL_CONTAINERCHANGED),this.stopListening(this.core.mediaControl,l.Events.MEDIACONTROL_RENDERED),this.stopListening(this.core.mediaControl,l.Events.MEDIACONTROL_HIDE),this.stopListening(this.core.getCurrentPlayback(),l.Events.PLAYBACK_LEVELS_AVAILABLE),this.stopListening(this.core.getCurrentPlayback(),l.Events.PLAYBACK_LEVEL_SWITCH_START),this.stopListening(this.core.getCurrentPlayback(),l.Events.PLAYBACK_LEVEL_SWITCH_END),this.stopListening(this.core.getCurrentPlayback(),l.Events.PLAYBACK_BITRATE)}},{key:"bindPlaybackEvents",value:function(){var t=this.core.getCurrentPlayback();this.listenTo(t,l.Events.PLAYBACK_PLAY,this.onPlay)}},{key:"reload",value:function(){this.unBindEvents(),this.bindEvents(),this.bindPlaybackEvents()}},{key:"shouldRender",value:function(){if(!this.core.getCurrentContainer())return!1;var t=this.core.getCurrentPlayback();if(!t)return!1;var e=t._hls;if(!e)return!1;var o=!!(this.tracks&&this.tracks.length>1);return o}},{key:"render",value:function(){if(this.shouldRender()){var t=l.Styler.getStyleFor(f.default,{baseUrl:this.core.options.baseUrl});this.$el.html(this.template({tracks:this.tracks,title:this.getTitle()})),this.$el.append(t),this.core.mediaControl.$(".media-control-right-panel").append(this.el),this.highlightCurrentTrack()}return this}},{key:"onPlay",value:function(){this.fillTracks(),this.render()}},{key:"fillTracks",value:function(){var t=this.core.getCurrentPlayback()._hls;t&&(this.tracks=t.audioTracks,this.current=t.audioTrack)}},{key:"onTrackSelect",value:function(t){var e=this.core.getCurrentPlayback()._hls;if(e)return this.current=parseInt(t.target.dataset.audioSelectorSelect,10),e.audioTrack=this.current,this.toggleContextMenu(),this.highlightCurrentTrack(),t.stopPropagation(),!1}},{key:"onButtonClick",value:function(t){this.toggleContextMenu()}},{key:"hideContextMenu",value:function(){this.$(".audio_selector ul").hide()}},{key:"toggleContextMenu",value:function(){this.$(".audio_selector ul").toggle()}},{key:"buttonElement",value:function(){return this.$(".audio_selector button")}},{key:"trackElement",value:function(t){return this.$(".audio_selector ul a"+(isNaN(t)?"":'[data-audio-selector-select="'+t+'"]')).parent()}},{key:"getTitle",value:function(){return(this.core.options.audioSelectorConfig||{}).title}},{key:"updateText",value:function(){null!=this.current&&this.tracks[this.current]&&this.buttonElement().text(this.tracks[this.current].name)}},{key:"highlightCurrentTrack",value:function(){this.trackElement().removeClass("current"),this.current&&this.trackElement(this.current).addClass("current"),this.updateText()}},{key:"name",get:function(){return"audio_selector"}},{key:"template",get:function(){return(0,l.template)(c.default)}},{key:"attributes",get:function(){return{class:this.name,"data-audio-selector":""}}},{key:"events",get:function(){return{"click [data-audio-selector-select]":"onTrackSelect","click [data-audio-selector-button]":"onButtonClick"}}}],[{key:"version",get:function(){return VERSION}}]),e}(l.UICorePlugin);e.default=h,t.exports=e.default},/*!******************************************************************************************!*\
  !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
  \******************************************************************************************/
function(e,o){e.exports=t},/*!****************************************!*\
  !*** ./src/public/level-selector.html ***!
  \****************************************/
function(t,e){t.exports='<button data-audio-selector-button>\n  Auto\n</button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-audio-selector-select="<%= i %>"><%= tracks[i].name %></a></li>\n  <% }; %>\n</ul>\n'},/*!*******************************!*\
  !*** ./src/public/style.scss ***!
  \*******************************/
function(t,e,o){e=t.exports=o(/*! ./../../~/css-loader/lib/css-base.js */5)(),e.push([t.id,".audio_selector[data-audio-selector]{float:right;margin-top:5px;position:relative}.audio_selector[data-audio-selector] button{outline:none;background-color:transparent;color:#fff;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-font-smoothing:antialiased;border:none;font-size:11px}.audio_selector[data-audio-selector] button:hover{color:#c9c9c9}.audio_selector[data-audio-selector] button.changing{-webkit-animation:pulse .5s infinite alternate}.audio_selector[data-audio-selector]>ul{list-style-type:none;position:absolute;bottom:35px;border:1px solid #000;display:none;background-color:rgba(0,0,0,.9)}.audio_selector[data-audio-selector] li{padding:1px;font-size:11px}.audio_selector[data-audio-selector] li[data-title]{background-color:#c3c2c2;padding:5px}.audio_selector[data-audio-selector] li a{color:#666;padding:3px 15px;display:block;text-decoration:none;white-space:nowrap}.audio_selector[data-audio-selector] li a:hover{background-color:#555;color:#fff}.audio_selector[data-audio-selector] li a:hover a{color:#fff;text-decoration:none}.audio_selector[data-audio-selector] li.current a{color:#fff}@-webkit-keyframes pulse{0%{color:#fff}50%{color:#ff0101}to{color:#b80000}}",""])},/*!**************************************!*\
  !*** ./~/css-loader/lib/css-base.js ***!
  \**************************************/
function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var o=this[e];o[2]?t.push("@media "+o[2]+"{"+o[1]+"}"):t.push(o[1])}return t.join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(n[i]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&n[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),t.push(a))}},t}}])});
//# sourceMappingURL=audio-selector.min.js.map